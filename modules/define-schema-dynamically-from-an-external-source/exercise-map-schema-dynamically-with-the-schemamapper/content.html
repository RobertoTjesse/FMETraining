<h2 id="learning-objectives">
  <span>Learning Objectives</span>
</h2>
<p>After completing this unit, you’ll be able to:</p>
<ul>
  <li>Understand the use cases for the SchemaMapper transformer.</li>
  <li>Map attributes in a dynamic workspace using a SchemaMapper transformer.</li>
</ul>
<h2 id="introduction">
  <span>Introduction</span>
</h2>
<h2 id="1-update-spreadsheet">
  <span>1) Update Spreadsheet</span>
</h2>
<p>The planning team has decided they should rename some attributes, so open the spreadsheet and rename the following attributes for the FireHalls feature type:</p>
<ul>
  <li>Name to HallName</li>
  <li>Address to HallAddress</li>
  <li>PhoneNumber to HallPhone</li>
</ul>
<div class="box message info">
  <div class="inner">
    <div class="bd">
      <div class="media">
        <img class="img mtm" role="presentation" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif" alt="Note" />
        <div class="mediaBd">
          <div class="message-media-content">
            <p>If you don't have Excel, instead of this step merely change the Resource Reader to use the advanced schema version of the file, C:\FMEData2019\Resources\DesktopAdvanced\CommunityMapAdvancedSchema.xlsx</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="2-update-spreadsheet-again">
  <span>2) Update Spreadsheet Again</span>
</h2>
<p>If you run the workspace now, it will run to completion, but there will be no values in the renamed fields of the FireHall table. That’s because FME had no way to tell how to map the source data to the new schema.</p>
<p>We could just add an AttributeRenamer transformer to handle this change, but the better way is to use the SchemaMapper. That way it can be made a little more dynamic.</p>
<p>So, in sheet 2 of the spreadsheet, enter:</p>
<table class="featureTable sort_table">
  <tbody class="tbody">
    <tr>
      <td><strong>OldAttrName</strong></td>
      <td><strong>NewAttrName</strong></td>
    </tr>
    <tr>
      <td>Name</td>
      <td>HallName</td>
    </tr>
    <tr>
      <td>Address</td>
      <td>HallAddress</td>
    </tr>
    <tr>
      <td>PhoneNumber</td>
      <td>HallPhone</td>
    </tr>
  </tbody>
</table>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.234.Ex5.UpdatedSpreadsheetSheet2.png" alt class="image image-block image-center" /></p>
<p>Then save the spreadsheet.</p>
<div class="box message info">
  <div class="inner">
    <div class="bd">
      <div class="media">
        <img class="img mtm" role="presentation" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif" alt="Note" />
        <div class="mediaBd">
          <div class="message-media-content">
            <p>Again, if you don't have Excel the advanced version of the Excel file has the correct updates already made.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="3-add-schema-mapper">
  <span>3) Add SchemaMapper</span>
</h2>
<p>Add a SchemaMapper transformer to the workspace, connected to the output feature type:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.235.Ex5.WorkspaceWithSchemaMapper.png" alt class="image image-block image-center" /></p>
<p>Inspect the SchemaMapper's parameters. It is a wizard, rather than a single dialog. In the format panel select the edited Excel file. In the next panel select Sheet 2 as the table to use.</p>
<p>In the final panel, select + &gt; Attribute Map:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.236.Ex5.AddAttributeMap.png" alt class="image image-block image-center" /></p>
<p>When prompted, select OldAttrName as the source field and NewAttrName as the Destination field. Check the box to Remove the original attributes (i.e. this is a renaming, not copying):</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.237.Ex5.SchemaMapperAttributeMapping.png" alt class="image image-block image-center" /></p>
<p>What this does is tell FME to rename attributes with the <em>OldAttrName</em> to attributes with a <em>NewAttrName</em>. Click OK to close this dialog, then click Finish. Now save and rerun the workspace.</p>
<p>Run the workspace. This time the output will have its attributes properly mapped. So now the planning department can translate their data, decide on the output schema, and map source to destination attributes dynamically; all by editing this one Excel spreadsheet. If either the existing source attributes change, they can be handled by editing the same spreadsheet.</p>
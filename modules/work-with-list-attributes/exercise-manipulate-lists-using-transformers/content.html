<h2 id="learning-objectives">
  <span>Learning Objectives</span>
</h2>
<p>After completing this unit, you’ll be able to:</p>
<ul>
  <li><br /></li>
</ul>
<h2 id="introduction">
  <span>Introduction</span>
</h2>
<p>A number of FME transformers are designed to work with list attributes. In the previous article, we discussed list creation. In this article, we will discuss the top transformers that are used to manipulate, transform, and analyze lists. There are about 15 transformers in total that manipulate list attributes, plus more on <a href="https://hub.safe.com/?page=1&amp;page_size=10&amp;order=relevance&amp;query=list" rel="noreferrer noopener" target="_blank">FME Hub</a>.<br /><br />Other useful transformers include the <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/attributemanager.htm" rel="noreferrer noopener" target="_blank">AttributeManager</a>, <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/attributeremover.htm" rel="noreferrer noopener" target="_blank">AttributeRemover</a>, or <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/attributekeeper.htm" rel="noreferrer noopener" target="_blank">AttributeKeeper</a> to clean up and remove redundant lists. It's good practice to clean up lists after finishing with them and will result in better workspace performance. Remove any excess lists as early in the workspace as possible so that FME only translates essential attributes.</p>
<h2 id="content-overview">
  <span>Content Overview</span>
</h2>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListExploder" rel="noreferrer noopener" target="_blank">ListExploder</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListIndexer" rel="noreferrer noopener" target="_blank">ListIndexer</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListConcatenator" rel="noreferrer noopener" target="_blank">ListConcatenator</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListSorter" rel="noreferrer noopener" target="_blank">ListSorter</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListSorter" rel="noreferrer noopener" target="_blank">ListBuilder</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListElementCounter" rel="noreferrer noopener" target="_blank">ListElementCounter</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListSearcher" rel="noreferrer noopener" target="_blank">ListSearcher</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListDuplicateRemover" rel="noreferrer noopener" target="_blank">ListDuplicateRemover</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListSummer" rel="noreferrer noopener" target="_blank">ListSummer</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListRangeExtractor" rel="noreferrer noopener" target="_blank">ListRangeExtractor</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#ListHistogrammer" rel="noreferrer noopener" target="_blank">ListHistogrammer</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#Python" rel="noreferrer noopener" target="_blank">PythonCaller</a></p>
<p><a href="https://community.safe.com/s/article/transformers-for-working-with-list-attibutes#Selecting" rel="noreferrer noopener" target="_blank">List Element Selection Dialog</a></p>
<p> </p>
<h2 id="step-by-step-instructions">
  <span>Step-by-Step Instructions</span>
</h2>
<p>The attached workspace template <em>ListTransformerExamples</em><em>.fmwt</em> builds on the scenario from the previous article, where we used list attributes to store all trees within each park. The below examples refer to this workspace when demonstrating how to use list transformers to work with the <em>_trees{} </em>list. Select <em>Run &gt; </em><a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Workbench/Workbench/feature_inspection_about.htm" rel="noreferrer noopener" target="_blank"><em>Run with Feature Caching</em></a> to run the workspace in a way that allows you to inspect the results of each transformer as features pass through the workspace.</p>
<p>In each section below, we will discuss what the transformer does and walk through an example of how to use it.</p>
<p> </p>
<h2 id="list-exploder">
  <span>ListExploder</span>
</h2>
<p>The <a href="https://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listexploder.htm" rel="noreferrer noopener" target="_blank">ListExploder</a><strong> </strong>is in the top 30 most frequently used FME transformers because of its power to turn lists into distinct features. It explodes a list by creating a feature for each element. Most formats do not have the ability to write list structures (XML and JSON being notable exceptions), so exploding lists can be useful when elements need to be preserved.<br /><br /><strong>Example: Exploding List Elements into Distinct Features</strong><br /><br />The ListExploder parameters allow you to specify the list that is to be turned into distinct features. Optionally, an "element index" attribute can be added to each feature to store the position of the element in the original list.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296jE" alt="Screen Shot 2021-05-20 at 11.09.40 AM.png" class="image image-block image-center" /><br /><br />The “Attribute Accumulation” section is where you choose how to merge or preserve the incoming attributes. "Accumulation Mode" has three options:</p>
<ul>
  <li><em>Merge List Attributes</em> - retain all attributes and add the exploded list attributes.</li>
  <li><em>Prefix List Attributes</em> - retain all attributes and add a prefix to the exploded list attributes. This mode is a good choice for retaining all attributes and avoiding attribute name conflicts.</li>
  <li><em>Only Use List Attributes</em> - preserve the flattened list attributes and remove all original attributes.</li>
</ul>
<p>"Conflict Resolution" helps resolve problems when an exploded list attribute ends up with the same name as one of the original attributes. You can choose to either preserve the original attribute or give the exploded attribute precedence. If you use Prefix List Attributes, there is no need for conflict resolution.<br /><br />Check the <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listexploder.htm" rel="noreferrer noopener" target="_blank">ListExploder documentation</a> for more details on how to configure these parameters.<br /><br />When we explode the _<em>trees{} </em>list into distinct features, note how the features outputted by the ListExploder keep their respective park attributes, as well as the attributes of that particular tree:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000293m0" alt="ListExploder.png" class="image image-block image-center" /><br /><br />The ListExploder also adds a new <em>_element_index </em>attribute to indicate the position of this element in the original list.<br /><br />Run the workspace and inspect the output to see how the trees are represented in the new table. Note that 14 features go into the transformer and 84 come out, which indicates that the list has successfully been exploded into distinct features.<br /> </p>
<h2 id="list-indexer">
  <span>ListIndexer</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listindexer.htm" rel="noreferrer noopener" target="_blank">ListIndexer</a><strong> </strong>is more selective about turning lists into distinct features. Instead of exploding all list elements like the ListExploder, it only explodes the element(s) at a given index, e.g. {1}. This transformer is often placed after another transformer that arranges the list in a particular order before choosing the index – for example, the ListSorter or ListSearcher.<br /><br /><strong>Example: Sorting a List and Selecting the First Element</strong><br /><br />The ListIndexer can be used to pick the largest tree in the<em> _trees{}</em> list. First, the ListSorter is used to sort the list by the _<em>trees{}.Diameter</em> attribute. Next, the ListIndexer is used to get the tree at index 0. The result is stored in a set of new attributes with the prefix <em>_largestTree_.</em><br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296j9" alt="Screen Shot 2021-05-20 at 11.06.37 AM.png" class="image image-block image-center" /><br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000293nD" alt="ListIndexer.png" class="image image-block image-center" /><br /> </p>
<h2 id="list-concatenator">
  <span>ListConcatenator</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listconcatenator.htm" rel="noreferrer noopener" target="_blank">ListConcatenator</a><strong> </strong>strings the elements of a list together into a single attribute value. In the parameters, you can specify which character to use as a separator (e.g. a comma or a newline character) and the name of the resulting attribute.<br /><br /><strong>Example: Concatenating a List into One Comma-Separated String</strong><br /><br />The ListConcatenator can be used to create a comma-separated list of tree species in each park. The new attribute is called <em>_species</em>. The example in the workspace refers to a list generated by the ListHistogrammer, which is covered in more detail below.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296k7" alt="Screen Shot 2021-05-20 at 11.18.44 AM.png" class="image image-block image-center" /><br /><br />When we inspect the result in the Feature Information pane, we can see the <em>_species</em> attribute with the concatenated list:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296kR" alt="Screen Shot 2021-05-20 at 11.23.34 AM.png" class="image image-block image-center" /><br /> </p>
<h2 id="list-sorter">
  <span>ListSorter</span>
</h2>
<p>Sorting lists, whether alphabetically or numerically, makes it easy to pick off certain characteristics from a list. For example, in the ListIndexer scenario above, we used the <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listsorter.htm" rel="noreferrer noopener" target="_blank">ListSorter</a> to sort the list by the Diameter attribute to find the largest tree.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296kg" alt="Screen Shot 2021-05-20 at 11.26.59 AM.png" class="image image-block image-center" /><br /> </p>
<h2 id="list-builder">
  <span>ListBuilder</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/linebuilder.htm" rel="noreferrer noopener" target="_blank">ListBuilder</a> is a join transformer that merges features based on common attributes. The attributes selected in the <em>Group By</em> parameter become the join key, meaning a feature is output for each combination of values of the specified <em>Group By</em> attributes.<br /><br />Note the ListBuilder removes the geometry, so if geometry is required, you can recreate it using a <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/vertexcreator.htm" rel="noreferrer noopener" target="_blank">VertexCreator</a> or similar transformer.<br /><br /><strong>Example: Grouping Features Based on Attribute Values</strong><br /><br />This example refers to the attached workspace template <em>ListBuilder.fmwt.</em> We have a table of tree species and park names and want to find which parks have a specific genus of tree in them. We can use the ListBuilder to group features by Genus:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296lF" alt="Screen Shot 2021-05-20 at 11.31.06 AM.png" class="image image-block image-center" /><br /><br />We can also set the "Add To List" parameter to <em>Selected Attributes </em>and choose which attributes to include in the resulting list, <em>_genusList{}</em>. When we run the workspace, the original 84 features are merged into 13 features, grouped by their Genus name:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q000001YSig" alt="1583425046534.png" class="image image-block image-center" /></p>
<p>When we inspect the resulting list in the Feature Information pane, we can see that features have been grouped by Genus. For example, this list includes four trees in three different parks that are all of the "Quercus" genus:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q000001YSih" alt="1583359144603.png" class="image image-block image-center" /><br /> </p>
<h2 id="list-element-counter">
  <span>ListElementCounter</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listelementcounter.htm" rel="noreferrer noopener" target="_blank">ListElementCounter</a> counts the number of elements in a list. For example, we can use it to count the elements in the<em> _trees{} </em>list and store that number in the <em>_treeCount</em> attribute.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296lU" alt="Screen Shot 2021-05-20 at 11.35.34 AM.png" class="image image-block image-center" /><br /><br />Since the number of elements in the list represents the number of tree points within a particular park, the result tells us how many trees are in each park.<br /> </p>
<h2 id="list-searcher">
  <span>ListSearcher</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listsearcher.htm" rel="noreferrer noopener" target="_blank">ListSearcher</a> allows you to use regular expressions or conditionals to search for patterns in a list and identify which element the pattern was found in.<br /><br /><strong>Example: Searching a List</strong><br /><br />We can use this transformer to search the <em>_trees{}</em> list for elements with "Oak" in the name. The index of the first element that contains the string is saved in an attribute called <em>_list_index</em>.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296le" alt="Screen Shot 2021-05-20 at 11.37.51 AM.png" class="image image-block image-center" /><br /><br />The <em>Copy Found List Element</em> parameter replicates the functionality of the ListIndexer by copying the list elements into attributes prefixed with <em>_oak_.</em> Note the new attributes produced by the ListSearcher:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296mX" alt="Screen Shot 2021-05-20 at 11.46.40 AM.png" class="image image-block image-center" /><br /><br />Each park contains a <em>_tree{} </em>list, and in each park, only the first match is found. In this scenario, 14 parks are input, and 3 parks are found to contain a tree called "Oak".<br /><br />If you want to extract the element of interest from the list, you can use a ListIndexer and pass it <em>_list_index </em>as the element to extract.</p>
<h2 id="list-duplicate-remover">
  <span>ListDuplicateRemover</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listduplicateremover.htm" rel="noreferrer noopener" target="_blank">ListDuplicateRemover</a><strong> </strong>cleans up a list by removing elements with duplicates of a particular attribute value.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296nu" alt="Screen Shot 2021-05-20 at 12.10.48 PM.png" class="image image-block image-center" /><br /><br />For example, in the <em>ListBuilder.fmwt</em> example above, we can find which parks have a specific Genus of tree while avoiding listing the same parks multiple times. If several oak trees exist in the same park, then by default the park will be named in the resulting list for every oak tree discovered there, which is redundant.<br /><br />If we make a list of parks that contain oak trees without using the ListDuplicateRemover, we end up with this:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296o9" alt="Screen Shot 2021-05-20 at 12.13.02 PM.png" class="image image-block image-center" /><br /><br />If we remove duplicate park names, the result looks like this:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296oE" alt="Screen Shot 2021-05-20 at 12.12.33 PM.png" class="image image-block image-center" /><br /> </p>
<h2 id="list-summer">
  <span>ListSummer</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listsummer.htm" rel="noreferrer noopener" target="_blank">ListSummer</a><strong> </strong>computes the sum of all elements in a list and stores the result in an attribute.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296oA" alt="Screen Shot 2021-05-20 at 12.17.19 PM.png" class="image image-block image-center" /><br /><br />For example, for each park, we can determine the total height of all the trees, and then divide it by the number of list elements to get the average tree height in that park.<br /> </p>
<h2 id="list-range-extractor">
  <span>ListRangeExtractor</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listrangeextractor.htm" rel="noreferrer noopener" target="_blank">ListRangeExtractor</a> returns the minimum and maximum of a list element.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000296pl" alt="Screen Shot 2021-05-20 at 12.27.32 PM.png" class="image image-block image-center" /><br /><br />For example, we can use this transformer to get the smallest and largest tree diameters in each park.<br /> </p>
<h2 id="list-histogrammer">
  <span>ListHistogrammer</span>
</h2>
<p>The <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/listhistogrammer.htm" rel="noreferrer noopener" target="_blank">ListHistogrammer</a> builds a histogram from the values in a list and returns these in a new list. The new list is sorted so the value with the most occurrences will be first.<br /><br /><strong>Example: Getting the Feature with the Most Occurrences of a Value</strong><br /><br />We can use the ListHistogrammer to find the park with the most trees, as well as to find out how many of each species is in each park.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000297dC" alt="Screen Shot 2021-05-21 at 10.10.14 AM.png" class="image image-block image-center" /><br /><br />With these parameters set, the transformer will count how many of each tree name exists in the <em>_tree{} </em>list. It derives the <em>_speciesHistogram{}</em> list and outputs it. Note how the resulting list includes <em>.count</em> and <em>.value</em> attributes:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000297dR" alt="Screen Shot 2021-05-21 at 10.11.54 AM.png" class="image image-block image-center" /><br /><br />When we run the workspace and inspect the output, we can select a park and view its attributes in the Feature Information pane. Note how this park contains a <em>_speciesHistogram{} </em>list with two elements. It shows that the park contains 3 Red Maple trees and 1 Bigleaf Maple tree.<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000297dg" alt="Screen Shot 2021-05-21 at 10.13.52 AM.png" class="image image-block image-center" /><br /> </p>
<h2 id="python-caller">
  <span>PythonCaller</span>
</h2>
<p>Python can be useful for performing more advanced list manipulation. There is a correlation between Python lists and FME lists – consider the following list of tree names:</p>
<blockquote>_trees = ["Fernleaf Beech", "Aristocrat Pear", "European Beech", "Pin Oak"]_trees{0} = Fernleaf Beech_trees{1} = Aristocrat Pear_trees{2} = European Beech_trees{3} = Pin Oak</blockquote>
<p>For example, say we want to search a list for elements that meet two conditions: it is a Maple tree and it has a canopy diameter greater than 25. We could chain together two ListSearchers to check each condition:</p>
<p><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q000001YSiq" alt="1585268648600.png" class="image image-block image-center" /></p>
<p>This indicates which parks have Maple trees with canopies greater than 25, but it doesn't output a list of all of the qualifying Maple trees. We can achieve this more advanced scenario with Python using the <a href="http://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_Transformers/Transformers/pythoncaller.htm" rel="noreferrer noopener" target="_blank">PythonCaller</a>.<br /><br />Two calls help pass lists in and out of Python. Start with <em>feature.getAttribute()</em>:<br /> </p><pre>_treesName = feature.getAttribute('_trees{}.CommonName')</pre>
<p><br />Then perform the desired list manipulation, and then finish with <em>feature.setAttribute()</em>:<br /> </p><pre>feature.setAttribute('_trees{}.CommonName', _treesList)</pre>
<p><br />Download the attached workspace template, <em>PythonLists.fmwt</em>, to see the complete workspace and Python code. See <a href="https://community.safe.com/s/article/python-and-fme-basics" rel="noreferrer noopener" target="_blank">Python and FME Basics</a> for a tutorial on working with Python in FME.<br /> </p>
<h2 id="list-element-selection-dialog">
  <span>List Element Selection Dialog</span>
</h2>
<p>Many transformers, like the Tester, TestFilter, and AttributeManager, allow you to select an attribute. If you select a list attribute, FME will prompt you with the List Element Selection dialog, where you can choose the element number:<br /><br /><img src="https://community.safe.com/servlet/rtaImage?eid=ka14Q000000lKIL&amp;feoid=00N30000006n8wU&amp;refid=0EM4Q00000297gV" alt="Screen Shot 2021-05-21 at 10.52.44 AM.png" class="image image-block image-center" /><br /><br />These parameters specify the CommonName attribute from the element at <em>_trees{0}.</em> If you don't want to hard-code the element number, you can also specify an attribute instead of a number using the Text Editor. For example:</p><pre>@Value(_treesMaple{@Value(_maple_elements)}.CommonName)</pre>
<p>See the AttributeCreator in the Python example above.</p>
<h2 id="learning-objectives">
  <span>Learning Objectives</span>
</h2>
<p>After completing this unit, you’ll be able to:</p>
<ul>
  <li>Use a feature type fanout on fme_feature_type to return features to their original layer.</li>
  <li>Use a .zip extension to create zipped output datasets.</li>
</ul>
<h2 id="resources">
  <span>Resources</span>
</h2>
<p>C:\FMEData2019\Workspaces\DesktopAdvanced\ReadWrite-Ex2-Complete.fmw</p>
<h2 id="introduction">
  <span>Introduction</span>
</h2>
<p>As a resident FME expert, you are often asked to translate data (particularly the community map) between formats. You realize that it would be much simpler if you created a workspace to do this - regardless of format - and let the end-users carry out the translation themselves. </p>
<div class="box message info">
  <div class="inner">
    <div class="bd">
      <div class="media">
        <img class="img mtm" role="presentation" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif" alt="Note" />
        <div class="mediaBd">
          <div class="message-media-content">
            <p>In the future, this would make an excellent use for an FME Server Data Download service, but for now, we'll let the users simply run the workspace in FME Workbench. To learn more about creating self-serve data download workflows, see the <a href="https://safe.my.trailhead.com/en/content/safe/trails/create-data-integration-apps" rel="noreferrer noopener" target="_blank">Create Data Integration Apps trail</a>.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<h2 id="1-start-workbench">
  <span>1) Start Workbench</span>
</h2>
<p>Open the <strong>starting workspace</strong> in FME Workbench 2021.1 or later.</p>
<h2 id="2-explore-the-workspace">
  <span>2) Explore the Workspace</span>
</h2>
<p>Explain generic, parameters, merged feature type, etc.</p>
<h2 id="3-set-fanout-using-a-format-attribute">
  <span>3) Set Fanout using a Format Attribute</span>
</h2>
<p>We would like to output features to their original table. To do this we need to know where they came from, and that is obtained from a format attribute called <em>fme_feature_type</em>.</p>
<p>Inspect the properties for the writer feature type. Set a fanout by choosing <em>fme_feature_type</em> as the attribute supplying the feature type name.</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.216.Ex2.FanoutByFeatureType.png" alt class="image image-block image-center" /></p>
<h2 id="4-create-a-zipped-output">
  <span>4) Create a Zipped Output</span>
</h2>
<p>In the Navigator, find the Destination Generic (Any Format) Folder writer parameter:</p>
<p>IMAGE</p>
<p>We will create a zipped folder to contain all of our files. Set the location of an output folder (such as <code>C:\FMEData2021\Output\Training</code>) then at the end type <code>\CommunityMapping.zip</code>.</p>
<p>Your full parameter value will look something like this:</p><pre>C:\FMEData2021\Output\Training\CommunityMapping.zip</pre>
<p>This will create a zipped file called CommunityMapping.</p>
<h2 id="5-save-and-run-workspace">
  <span>5) Save and Run Workspace</span>
</h2>
<p>Save the workspace and then run it with the prompt option set. When prompted, select some source tables to read (include at least the GarbageSchedule plus one other).</p>
<p>Set Esri Shapefile as the format to write:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.217.Ex2.UserPrompts.png" alt class="image image-block image-center" /></p>
<p>Click the Run button to run the translation. Examine the output folder. A zipped folder has been created which contains all the selected tables that have been written back to Shapefile format:</p>
<p><img src="https://s3.amazonaws.com/gitbook/Desktop-Advanced-2019/DesktopAdvanced3AdvancedRW/Images/Img3.218.Ex2.OutputDatasets.png" alt class="image image-block image-center" /></p>
<p>Now you have a solution that almost anyone will be able to open and run for themselves. Also, if you published the workspace to FME Server it would automatically create a web page that matched the different user parameters.</p>
<div class="box message info">
  <div class="inner">
    <div class="bd">
      <div class="media">
        <img class="img mtm" role="presentation" src="https://res.cloudinary.com/hy4kyit2a/image/upload/doc/trailhead/en-usb473bb5ea1b7e61dfb07e6a7e547de6b.gif" alt="Note" />
        <div class="mediaBd">
          <div class="message-media-content">
            <p>Did you notice that FME handled the different geometry types and output the files with the geometry as part of the name? It’s a Shapefile format thing. FME can never – and will never – write more than one geometry type to the same Shapefile .shp file.</p>
            <p>The one drawback with the output is that each Shapefile has <strong>all</strong> of the attributes of <strong>all</strong> of the source tables. To avoid that you would need to use a dynamic translation. You can read about dynamic translations in the <a href="https://docs.safe.com/fme/html/FME_Desktop_Documentation/FME_ReadersWriters/!FeatureTypeProperties/workspaces_dynamic_about.htm" rel="noreferrer noopener" target="_blank">Documentation</a> or follow <a href="https://community.safe.com/s/article/dynamic-workflow-tutorial-introduction" rel="noreferrer noopener" target="_blank">this tutorial</a>.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>